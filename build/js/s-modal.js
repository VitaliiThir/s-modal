!function(p){"use strict";p.fn.sModal=function(e){var i=p.extend({preloader:!1,preloaderPuth:"../img/modal-preloader.gif",speedFade:200,maxWidth:680,maxHeight:576,videoMaxWidth:670,background:"rgba(255, 255, 255, .95)",border:!0,borderRadius:5,borderWidth:8,borderStyle:"double",borderColor:"#555555",customClass:null,customClassForContent:null,defaultStyles:"default-style",bodyOverlow:!0,videoAutoPlay:!1,image:!1,imageClass:"s-modal-image",html:!1,sModal:"s-modal",sItemWrapper:"s-modal-item-wrapper",sItem:"s-modal-item",sContentWrapper:"s-modal-content-wrapper",sContent:"s-modal-content",sClose:"s-modal-close",sModalPreloader:"s-modal-preloader",span:"<span/>"},e);return this.each(function(){var a,e=p(this).clone(),s=p("body"),d=p("<div/>",{class:i.sModal}).append(p("<div/>",{class:i.sItemWrapper}).append(p("<div/>",{class:i.sItem}).append(p("<div/>",{class:i.sContentWrapper}).append(p("<div/>",{class:i.sContent}).append(p("<div/>",{class:i.sClose}).append(i.span+i.span)))))),t=d.find("."+i.sContent),r=d.find("."+i.sClose);if(s.append(d),t.prepend(e),!0===i.bodyOverlow&&s.addClass("overflow"),d.fadeIn("slow"),null===i.customClass?t.parents("."+i.sItemWrapper).addClass(i.defaultStyles):t.parents("."+i.sItemWrapper).removeClass(i.defaultStyles).addClass(i.customClass),!0===i.image&&t.parents("."+i.sItemWrapper).removeClass(i.defaultStyles).addClass(i.imageClass),null!==i.customClass&&(n(),p(window).on("resize",n)),t.parents("."+i.sItem).addClass("scale"),!0===i.preloader&&(a=p('<div class="'+i.sModalPreloader+'"><img src="'+i.preloaderPuth+'" alt="Loading"></div>'),e.parent().append(a),a.css("display","block"),e.parent().ready(function(e){a.find("img").delay(2*i.speedFade).fadeOut(i.speedFade),a.delay(2.5*i.speedFade).fadeOut(i.speedFade),e()})),e.fadeIn(i.speedFade),(0<t.find("video").length||!0!==i.html&&0<t.find("iframe").length)&&(t.parents("."+i.sItemWrapper).removeClass(i.defaultStyles).addClass(i.sItemWrapper),e.parents("."+i.sItemWrapper).addClass("s-modal-video").css("max-width",i.videoMaxWidth+"px")),0<t.find("video").length){var o=t.find("video");o.delay(i.speedFade).fadeIn(3*i.speedFade),!0===i.videoAutoPlay?o.get(0).play():o.get(0).pause(),o.prop("controls",!0)}if(!0!==i.html&&0<t.find("iframe").length){var l=t.find("iframe");l.removeAttr("width").removeAttr("height").removeAttr("frameborder"),l[0].src+="?autoplay=0"}function n(){var e=p("."+i.customClass),a=e.height(),s=e.width();p("."+i.sContentWrapper).css({"max-height":a+"px","max-width":s+"px"})}!0===i.html&&e.parents("."+i.sItemWrapper).removeClass("s-modal-video").addClass("s-modal-html"),null!==i.customClassForContent&&e.parents("."+i.sItemWrapper).addClass(i.customClassForContent),p("."+i.defaultStyles).css({"max-width":i.maxWidth+"px","max-height":i.maxHeight+"px"}),p("."+i.defaultStyles+" ."+i.sContentWrapper).css({"max-width":i.maxWidth+"px","max-height":i.maxHeight+"px"}),d.find("."+i.sContent).css("background",i.background),!0===i.border&&d.find("."+i.sItem).css({"border-radius":i.borderRadius+"px","border-width":i.borderWidth+"px","border-style":i.borderStyle,"border-color":i.borderColor}),r.on("click",function(){var e=s.find("."+i.sModal);d.fadeOut(i.speedFade),e.each(function(){e.length<2&&s.removeClass("overflow")}),setTimeout(function(){d.detach()},i.speedFade)}),d.on("click",function(e){p(this).find("."+i.sItem).is(e.target)||0!==p(this).find("."+i.sItem).has(e.target).length||r.trigger("click")})})}}(jQuery);